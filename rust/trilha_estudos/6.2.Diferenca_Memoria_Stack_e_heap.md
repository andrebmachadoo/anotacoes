## Diferença entre stack e heap
---

> Porque estudar esse assunto aqui? Porque no arquivo [6.1.PonteirosBox.md](6.1.PonteirosBox.md) falamos sobre o Box ser um ponteiro inteligente que por padrão aloca no heap


**Stack:** memória local da thread atual, rápida, com tamanho fixo, usada para dados pequenos e temporários (como números, referências, structs pequenas).

**Heap:** memória globalmente acessível, usada para dados grandes ou de tempo de vida indefinido (como String, Vec, Box, etc).

**Resumindo:**  
**Stack** rápida, local, previsível  
**Heap** → flexível, compartilhável, mais lenta (mas necessária em muitos casos)

**✅ O programador deve se preocupar com stack/heap?**

> Sim, mas com muito menos dor de cabeça.  
> Rust cuida da alocação e liberação automaticamente, mas você deve entender os princípios para escrever código eficiente e sem erros de propriedade.

**✅ Exemplo prático: leitura de JSON (ex: array de objetos)**  

>Quando você lê o retorno de uma API com serde_json e transforma em um Vec<Objeto>, o Rust: 
>Aloca o vetor (Vec) no stack  
>Aloca os dados (cada Objeto) no heap  

**✅ Isso é automático, você não precisa gerenciar manualmente.**

```rust
#[derive(Deserialize)]
struct Produto {
    nome: String,
    preco: f64,
}

let json = r#"[{"nome":"Caneta","preco":2.5}]"#;
let produtos: Vec<Produto> = serde_json::from_str(json)?; // Alocado corretamente
```
> **A String e o Vec são heap por natureza.**  
> A variável produtos (ponteiro + tamanho + capacidade) vive na stack.  
> O conteúdo (cada Produto) vai para o heap.

---

