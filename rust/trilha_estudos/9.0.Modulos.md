#  ‚úÖ Criando e Usando M√≥dulos -  Organiza√ß√£o de C√≥digo em Rust
---
‚ö†Ô∏è _**Importante!:** Considere como modulo cada arquivo que exporta/exponha valores/funcionalidades que pode ser utlizadas em outra parte(modulo) do codigo._ 
- Rust organiza c√≥digo em m√≥dulos e arquivos para manter projetos escal√°veis e leg√≠veis;
- A estrutura √© semelhante a "namespaces" ou "m√≥dulos" em outras linguagens;
- Func√µes, structs e campos tem visibilidade privado por padrao;
- Para deixar visivel coloque a literal `pub` antes;

**Exemplo de visibilidade**
```rust
pub struct Produto {
    pub nome: String,
    preco: f64, // privado
}
```

 **üìÅ 1. Arquivos no mesmo diretorio**
---
```rust
src/
‚îú‚îÄ‚îÄ main.rs
‚îî‚îÄ‚îÄ utils.rs

----------------------------------------
//Arquivo ->  ./src/main.rs
mod utils; // importa o m√≥dulo utils.rs
fn main() {
    utils::saudacao("Rustaceano");
}

----------------------------------------
//Arquivo ->  ./src/utils.rs
pub fn saudacao(nome: &str) {
    println!("Ol√°, {}!", nome);
}
```

**üìÅ 2. Subm√≥dulos em pastas**
---
```rust
src/
‚îú‚îÄ‚îÄ main.rs
‚îî‚îÄ‚îÄ controllers/
    ‚îî‚îÄ‚îÄ mod.rs

----------------------------------------
//Arquivo ->  ./src/main.rs
mod controllers;

fn main() {
    controllers::usuario::criar();
}

----------------------------------------
//Arquivo ->  ./src/controllers/mod.rs
pub mod usuario; // aponta para usuario.rs

----------------------------------------
//Arquivo ->  ./src/controllers/usuario.rs
pub fn criar() {
    println!("Criando usu√°rio...");
}
```

> Utilizando `use crate::` para facilitar o acesso do main.rs ao submodulo.  
>Considere o `crate::` como o path raiz do projeto ou seja `./src/`. Mesmo assim √© necessario mapear o submodulo no arquiv mod.rs do diretorio controller pois √© esse arquivo que expoe as funcionalidades do modulo.

```rust
use crate::controllers::usuario::criar;

fn main() {
    criar(); // agora pode chamar diretamente
}
```

**üìÅ 3. Como os submodulos se comunicam entre si**
---
> A estrutura abaixo √© ilustrativa para um sistema modular 

```rust
src/
‚îú‚îÄ‚îÄ main.rs
‚îú‚îÄ‚îÄ database.rs
‚îî‚îÄ‚îÄ modulos/
    ‚îî‚îÄ‚îÄ vendas/
        ‚îú‚îÄ‚îÄ mod.rs
        ‚îú‚îÄ‚îÄ vendas_routes.rs
        ‚îú‚îÄ‚îÄ vendas_controller.rs        
        ‚îî‚îÄ‚îÄ vendas_model.rs   


----------------------------------------
//Arquivo ->  ./src/modulos/vendas/mod.rs
pub mod vendas_routes;      // aponta para vendas_routes.rs
pub mod vendas_controller;  // aponta para vendas_controller.rs
pub mod vendas_model;       // aponta para vendas_model.rs

----------------------------------------
//Arquivo ->  ./src/modulos/vendas/vends_routes.rs
use super::vendas_controller;

pub fn get() -> <T> {
    let controller_output = vendas_controller::get_controller();
}
----------------------------------------
//Arquivo ->  ./src/modulos/vendas/vendas_controller.rs
use super::vendas_model;

pub fn get_controller() -> <T> {
    let model_output = vendas_model::select();
}

----------------------------------------
//Arquivo ->  ./src/modulos/vendas/vendas_model.rs
use crate::database;

pub fn select() -> <T> {
    let db = database::query();
}

----------------------------------------
//Arquivo ->  ./src/database.rs
pub fn query() -> <T> {
    //...
}

----------------------------------------
//Arquivo ->  ./src/main.rs
mod database;   // Necess√°rio para os submodulos importar "o main.rs √© o mod.rs global"
mod modulos {   //Importa o submodulo `modulos` e seus submodulo `vendas`
    pub mod vendas;
}

use modulos::vendas::vendas_routes; // Importa o modulo vendas_routes

fn main() {    
    let output = vendas_routes::get();    
}
```

> Outra facilidade para importar varias funcionalidades de um submodulo √© utilizando o `crate::` assim:

```rust
//Arquivo ->  ./src/main.rs

mod routes;

use modulos::vendas::vendas_routes::{
    post, get, get_id, update, delete......
};

fn main() {
    // usar os handlers se necess√°rio diretamente
    let _ = get_id();
}

```



**üìÅ 4. Usar crate::modules::... √© boa pr√°tica?**
---
- Sim ‚Äî √© idiom√°tico em Rust e funciona bem com estrutura de projetos maiores.  
- Voc√™ est√° dizendo explicitamente que est√° acessando a partir da raiz do crate, o que melhora a clareza e evita ambiguidade.  

Exemplo:

```rust
use crate::{
    modules::produtos::controllers::{
        create_produto, read_produto
    },
    modules::produtos::business_rule::{
        atualizar_estoque
    }
};
```
**‚ö†Ô∏è Boa pr√°tica: importar s√≥ o que for usar. Se precisar de muitos m√©todos, pode agrupar:**

```rust
use crate::modules::produtos::controllers::*;
```

**‚úÖ Como mod.rs ajuda?**
 - Evita ter que declarar mod manualmente em todo lugar.  
 - Centraliza os subm√≥dulos export√°veis do dom√≠nio.
 - Permite que o restante do sistema acesse m√©todos via crate::modules::produtos::... com seguran√ßa e clareza.
