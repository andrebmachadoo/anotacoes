## M√≥dulos e Organiza√ß√£o de C√≥digo em Rust
---

>Rust organiza c√≥digo em m√≥dulos e arquivos para manter projetos escal√°veis e leg√≠veis. A estrutura √© semelhante a "namespaces" ou "m√≥dulos" em outras linguagens.

‚úÖ 1. Criando e Usando M√≥dulos


üìÅ Estrutura de arquivos:

```css
src/
‚îú‚îÄ‚îÄ main.rs
‚îî‚îÄ‚îÄ utils.rs
```
üìÑ main.rs

```rust
mod utils; // importa o m√≥dulo utils.rs

fn main() {
    utils::saudacao("Rustaceano");
}
```
üìÑ utils.rs

```rust
pub fn saudacao(nome: &str) {
    println!("Ol√°, {}!", nome);
}
```
‚úÖ 2. Subm√≥dulos em pastas      

üìÅ Estrutura:

```rust
src/
‚îú‚îÄ‚îÄ main.rs
‚îî‚îÄ‚îÄ controllers/
    ‚îî‚îÄ‚îÄ mod.rs
```
üìÑ main.rs

```rust
mod controllers;

fn main() {
    controllers::usuario::criar();
}
```
üìÑ controllers/mod.rs

```rust
pub mod usuario; // aponta para usuario.rs
```

üìÑ controllers/usuario.rs

```rust
pub fn criar() {
    println!("Criando usu√°rio...");
}
```

‚úÖ 3. use para facilitar acesso

```rust
use crate::controllers::usuario::criar;

fn main() {
    criar(); // agora pode chamar diretamente
}
```

‚úÖ 4. Separando l√≥gica por dom√≠nio  

```

models.rs ‚Üí Structs e enums

controllers/ ‚Üí L√≥gica de neg√≥cio (ex: criar, listar)

routes.rs ‚Üí Pontos de entrada (ex: rotas da API)

lib.rs ‚Üí Biblioteca reutiliz√°vel

main.rs ‚Üí Fun√ß√£o principal
```

‚úÖ 5. Visibilidade: pub e privado  

>Fun√ß√µes, structs, e campos s√£o privados por padr√£o  
>Use pub para torn√°-los acess√≠veis externamente

```rust


pub struct Produto {
    pub nome: String,
    preco: f64, // privado
}

---
```

‚úÖ Exemplo com estrutura modular

```
src/
‚îú‚îÄ‚îÄ main.rs
‚îú‚îÄ‚îÄ routes.rs
‚îî‚îÄ‚îÄ helps/
     ‚îî‚îÄ‚îÄ utils.rs
‚îî‚îÄ‚îÄ modules/
        ‚îî‚îÄ‚îÄ produtos/
                ‚îú‚îÄ‚îÄ routes.rs
                ‚îú‚îÄ‚îÄ controllers.rs
                ‚îú‚îÄ‚îÄ produtos_model.rs                
                ‚îú‚îÄ‚îÄ marcas_model.rs                
                ‚îú‚îÄ‚îÄ business_rule.rs
                ‚îî‚îÄ‚îÄ mod.rs
        ‚îî‚îÄ‚îÄ users/
                ‚îú‚îÄ‚îÄ routes.rs
                ‚îú‚îÄ‚îÄ controllers.rs
                ‚îú‚îÄ‚îÄ users_model.rs
                ‚îú‚îÄ‚îÄ groups_model.rs
                ‚îî‚îÄ‚îÄ mod.rs
```


**1. Como deixar vis√≠vel via mod.rs**

```rust

//src/modules/produtos/mod.rs

pub mod produtos_model;
pub mod marcas_model;
pub mod business_rule;
pub mod controllers;
pub mod routes; // se quiser registrar rotas no `src/routes.rs`
```
> Isso exp√µe publicamente os subm√≥dulos do m√≥dulo produtos, permitindo que o restante do sistema acesse conforme necess√°rio.

**‚úÖ 2. Como main.rs acessa os m√©todos de controllers.rs**

```rust
// src/main.rs

mod routes;

use crate::modules::produtos::controllers::{
    create_produto, read_produto, update_produto, delete_produto
};

fn main() {
    // usar os handlers se necess√°rio diretamente
    let _ = create_produto();
}
```


‚úÖ 3. Como produtos/routes.rs acessa controllers.rs

```rust
//src/modules/produtos/routes.rs

use super::controllers::{
    create_produto, read_produto, update_produto, delete_produto
};

use axum::Router;

pub fn produtos_routes() -> Router {
    Router::new()
        .post("/", create_produto)
        .get("/", read_produto)
        .put("/:id", update_produto)
        .delete("/:id", delete_produto)
}

```
> ‚úÖ Dica: Use super:: dentro do mesmo m√≥dulo pai (como modules/produtos/), e crate:: para acessar a partir da raiz (src/).


**‚úÖ 4. Usar crate::modules::... √© boa pr√°tica?**

> Sim ‚Äî √© idiom√°tico em Rust e funciona bem com estrutura de projetos maiores.  
> Voc√™ est√° dizendo explicitamente que est√° acessando a partir da raiz do crate, o que melhora a clareza e evita ambiguidade.  

Exemplo objetivo:

```rust

use crate::{
    modules::produtos::controllers::{
        create_produto, read_produto
    },
    modules::produtos::business_rule::{
        atualizar_estoque
    }
};

```
> üîπ Boa pr√°tica: importar s√≥ o que for usar. Se precisar de muitos m√©todos, pode agrupar:

```rust
use crate::modules::produtos::controllers::*;
```

**‚úÖ Resumo: Como mod.rs ajuda?**

 - Evita ter que declarar mod manualmente em todo lugar.  
 - Centraliza os subm√≥dulos export√°veis do dom√≠nio.
 - Permite que o restante do sistema acesse m√©todos via crate::modules::produtos::... com seguran√ßa e clareza.
